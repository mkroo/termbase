# Requirements

## User Stories

### 1. 슬랙 연동

**As a** 관리자
**I want to** 슬랙 워크스페이스를 연동하고 모니터링할 채널을 선택할 수 있다
**So that** 해당 채널의 대화에서 용어를 수집할 수 있다

**인수조건:**

- 슬랙 OAuth를 통해 워크스페이스를 연동할 수 있다
- 연동된 워크스페이스의 채널 목록을 조회할 수 있다
- 모니터링할 채널을 선택/해제할 수 있다
- 연동 상태를 확인할 수 있다
- 모니터링 대상 채널로부터 메세지를 수집할 수 있다

---

### 2. 용어 등록 리마인더

**As a** 사용자
**I want to** 용어 사전에 등록되지 않은 용어를 빈도 높은 순으로 주기적으로 리마인더로 받고 싶다
**So that** 팀 내 용어의 정의를 통일할 수 있다

**인수조건:**

- 슬랙 채널로 리마인더를 받을 수 있다
- 리마인더의 주기를 cron 표현식으로 설정할 수 있다
- 리마인더에서 표시할 빈도 상위 N개의 용어 개수를 설정할 수 있다
- 리마인더를 수동으로 발송할 수 있다
- 리마인더에 용어 사전을 등록하는 링크가 포함된다

---

### 3. 용어 사전 조회

**As a** 사용자
**I want to** 용어 사전을 조회할 수 있다
**So that** 팀 내 용어의 정의를 확인할 수 있다

**인수조건:**

- 용어 사전에서 용어를 검색할 수 있다
- 가장 빈도가 높은 용어 순으로 정렬하여 조회할 수 있다
- 각 용어의 정의(definition)와 동의어(synonym)를 확인할 수 있다

---

### 4. 용어 사전 상세 조회

**As a** 사용자
**I want to** 특정 용어의 상세 정보를 조회할 수 있다
**So that** 해당 용어의 사용 예시와 최근 트렌드를 파악할 수 있다

**인수조건:**
- 특정 용어의 정의(definition)와 동의어(synonym)를 확인할 수 있다
- 특정 용어의 등장 빈도를 시계열(일/주/월)로 조회할 수 있다
- 특정 용어가 포함된 원본 메시지를 최근 n개를 조회할 수 있다 (최대 100개, 기본 10개)
  - 원본 메세지를 표시할 때 용어가 포함된 부분을 하이라이트 처리한다

---

### 5. 용어 추출

**As a** 시스템
**I want to** 대화 내역(e.g. Slack, Gmail)에서 용어 후보를 추출한다
**So that** 정의를 등록하지 않은 용어를 식별할 수 있다

**인수조건:**

- 문장에서 일반명사(NNG), 고유명사(NNP), 의존명사(NNB)를 용어 후보로 추출한다
- 문장에서 용어가 여러번 등장하는 경우, 가중치를 부여하여 빈도에 반영한다
- 용어 사전에 등록된 용어는 형태소 분석과 관계없이 해당 용어 전체를 추출한다
- 동의어 사전에 있는 동의어(synonym)는 대표어(canonical)로 치환하여 추출한다
- 무시된 단어(ignored)는 추출에서 제외한다

---

### 6. 용어 사전(glossary) 관리

**As a** 관리자
**I want to** 용어 사전에 용어를 추가/수정/삭제할 수 있다
**So that** 용어 추출 정확도를 높일 수 있다

**인수조건:**
- 용어 사전에 정의와 함께 용어를 추가할 수 있다
  - 용어 사전에 용어를 추가할 때 기존 용어가 포함되는 경우, 먼저 기존 용어를 삭제하라는 경고 메시지를 표시한다 (e.g. "인공지능" 추가 시 "지능"이 이미 등록된 경우)
- 용어 사전에서 용어를 삭제할 수 있다
- 용어 사전에서 용어의 이름은 수정할 수 없다
  - 용어의 이름을 변경하기 위해서는 기존 용어를 삭제하고 새로 추가해야 한다
- 용어 사전에서 용어의 정의는 수정할 수 있다
- 용어 사전, 동의어, 무시된 단어(ignored) 간의 중복을 허용하지 않는다

---

### 7. 동의어 관리

**As a** 관리자
**I want to** 동의어 사전에 동의어 쌍을 추가/수정/삭제할 수 있다
**So that** 용어 추출 시 동의어를 대표어로 치환할 수 있다

**인수조건:**
- 동의어 쌍을 추가할 수 있다 (예: "대표어: AI, 동의어: 인공지능")
  - 대표어는 이미 용어 사전에 정의된 용어여야 한다
  - 동의어는 용어 사전에 정의되지 않은 용어여야 한다.
  - 동의어가 용어 사전에 이미 정의된 용어인 경우, 동의어로 추가할 수 없다는 경고 메시지를 표시한다
  - 동의어는 다른 동의어 쌍에 이미 포함되지 않은 용어여야 한다
  - 동의어는 대표어와 동일한 용어일 수 없다
- 동의어 쌍을 삭제할 수 있다
- 동의어 쌍에서 대표어는 수정할 수 없다
- 용어 사전, 동의어, 무시된 단어(ignored) 간의 중복을 허용하지 않는다 

---

### 8. 무시 용어 관리

**As a** 관리자
**I want to** 무시된 단어(ignored)를 추가/수정/삭제할 수 있다
**So that** 용어 추출 시 무시된 단어를 제외

**인수조건:**
- 무시된 단어(ignored)를 추가할 수 있다
  - 무시된 단어를 추가할 때 이유를 반드시 기재해야 한다
- 무시된 단어(ignored)를 삭제할 수 있다
- 무시된 단어(ignored)의 이유는 수정할 수 있다
- 용어 사전, 동의어, 무시된 단어(ignored) 간의 중복을 허용하지 않는다

---

### 9. 용어 후보 조회

**As a** 사용자
**I want to** 용어 사전에 등록되지 않은 추출된 용어를 조회할 수 있다
**So that** 팀 내 용어의 정의를 등록할 수 있다

**인수조건:**
- 용어 후보를 빈도 높은 순으로 조회할 수 있다
- 각 용어 후보의 등장 빈도를 확인할 수 있다
- 용어 후보 목록에서 특정 용어를 검색할 수 있다
- 용어 후보 목록에서 바로 정의를 입력하여 등록할 수 있다
- 용어 후보 목록에서 바로 무시 처리할 수 있다 (사유 입력 필수)

---

### 10. SourceDocument Bulk 추가

**As a** 시스템/관리자
**I want to** 여러 개의 SourceDocument를 한 번에 추가할 수 있다
**So that** 대량의 원천 데이터를 효율적으로 인덱싱할 수 있다

**인수조건:**

- 여러 개의 SourceDocument를 한 번의 API 호출로 추가할 수 있다
- 각 SourceDocument는 content, metadata, timestamp를 포함한다
- metadata는 source 타입에 따라 SlackMetadata, GmailMetadata, WebhookMetadata 중 하나이다
- Bulk 추가 시 성공한 문서 수와 실패한 문서 수를 반환한다
- 일부 문서가 실패해도 나머지 문서는 정상적으로 추가된다 (Partial Success)
- 추가된 문서는 즉시 용어 빈도 집계에 반영된다
 
### 11. 합성어 처리

**As a** 시스템
**I want to** 합성어를 올바르게 처리할 수 있다
**So that** 용어 추출의 정확도를 높일 수 있다

**인수조건:**
- 합성어를 용어 사전에 등록할 수 있다.
- 합성어는 형태소 분석 시 분리되지 않도록 처리한다 (예: "데이터베이스"는 "데이터" + "베이스"로 분리되지 않음)
- 공백으로 구분된 합성어도 인식할 수 있다 (예: "공유 주차장"도 "공유주차장"과 동일하게 인식)
- 합성어 사전에 등록된 합성어는 용어 추출 시 하나의 용어로 인식된다
